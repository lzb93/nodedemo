webpackJsonp([5],{unvZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),i=n("exGp"),o=n.n(i),c=n("Dd8w"),s=n.n(c),u=n("2cg0"),l=n.n(u),d=n("NYxO"),p={name:"list",data:function(){return{loading:!0,list:[],page:{},currentPage:1,columns:[{title:"ID",key:"id",width:80,align:"center"},{title:"专栏封面",width:150,align:"center",render:function(t,e){return t("img",{attrs:{src:e.row.cover+"?imageView2/1/w/100/h/100"},style:{width:"80px",height:"80px",padding:"10px","border-radius":"10px"}})}},{title:"专栏标题",key:"title"},{title:"专栏简介",key:"description"},{title:"操作",slot:"action",width:200,align:"center"}]}},created:function(){this.fetchData()},methods:s()({},Object(d.b)({geColumnList:"column/list",destroyColumn:"column/destroy"}),{fetchData:function(){var t=this;return o()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.geColumnList({page:t.currentPage});case 2:n=e.sent,t.list=n.data.data.data,t.page=n.data.data.meta,t.loading=!1;case 6:case"end":return e.stop()}},e,t)}))()},handlePage:function(t){this.$router.replace({query:l()(this.$route.query,{page:t})}),this.currentPage=t,this.fetchData()},update:function(t){this.$router.push("/column/update/"+t)},chapter:function(t){this.$router.push("/column/chapter/"+t)},toPathLink:function(t){this.$router.push(t)},destroy:function(t){var e,n=this;this.$Modal.confirm({title:"提示",content:"<p>确定删除此专栏吗？</p>",loading:!0,onOk:(e=o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.destroyColumn(t);case 3:n.$Message.success("删除成功"),n.fetchData(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.$Message.error(e.t0);case 10:return e.prev=10,n.$Modal.remove(),e.finish(10);case 13:case"end":return e.stop()}},e,n,[[0,7,10,13]])})),function(){return e.apply(this,arguments)}),onCancel:function(){n.$Message.warning("取消！")}})}})},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("Button",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"primary",icon:"md-add"},on:{click:function(e){return t.toPathLink("/column/create")}}},[t._v("新增专栏\n  ")]),t._v(" "),t.list.length>0?n("section",[n("Table",{attrs:{loading:t.loading,border:"",columns:t.columns,data:t.list},scopedSlots:t._u([{key:"name",fn:function(e){var a=e.row;return[n("strong",[t._v(t._s(a.name))])]}},{key:"action",fn:function(e){var a=e.row;return e.index,[n("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"warning",size:"small"},on:{click:function(e){return t.chapter(a.id)}}},[t._v("章节")]),t._v(" "),n("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.update(a.id)}}},[t._v("编辑")]),t._v(" "),n("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.destroy(a.id)}}},[t._v("删除")])]}}],null,!1,4122883406)}),t._v(" "),n("section",{staticClass:"page"},[n("Page",{attrs:{total:t.page.total,"page-size":t.page.per_page,current:t.page.current_page,"show-total":""},on:{"on-change":t.handlePage}})],1)],1):t._e()],1)},staticRenderFns:[]};var h=n("VU/8")(p,g,!1,function(t){n("usQd")},"data-v-5e435644",null);e.default=h.exports},usQd:function(t,e){}});
//# sourceMappingURL=5.360d132d3d7a9c8e35bb.js.map